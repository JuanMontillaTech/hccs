(window.webpackJsonp=window.webpackJsonp||[]).push([[108],{748:function(e,t,r){var content=r(789);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(53).default)("3b857042",content,!0,{sourceMap:!1})},788:function(e,t,r){"use strict";r(748)},789:function(e,t,r){var n=r(52)((function(i){return i[1]}));n.push([e.i,"",""]),n.locals={},e.exports=n},858:function(e,t,r){"use strict";r.r(t);r(7),r(8),r(4),r(2),r(9),r(6),r(10);var n=r(0),o=r(30),c=(r(19),r(25),r(75),r(601)),l=r.n(c);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m={data:function(){return{assets:[],fields:[{key:"name",label:"Nombre"},{key:"assetClassName",label:"Clase de Activo"},{key:"locationName",label:"Ubicación"},{key:"acquisitionDate",label:"Fecha de Adquisición"},{key:"acquisitionCost",label:"Costo"},{key:"status",label:"Estado"},{key:"actions",label:"Acciones"}],searchQuery:"",currentPage:1,perPage:10,totalRows:0}},mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchAssets();case 2:case"end":return t.stop()}}),t)})))()},methods:{fetchAssets:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.get("Asset/GetAll");case 3:r=t.sent,e.assets=r.data.data.map((function(e){return f(f({},e),{},{assetClassName:e.assetClass.name,locationName:e.location.name})})),e.totalRows=e.assets.length,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.$toast.error(t.t0.message,"Error al obtener activos",e.izitoastConfig);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},createNewAsset:function(){this.$router.push("/asset/create")},editAsset:function(e){this.$router.push("/asset/Edit?id=".concat(e))},deleteAsset:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,l.a.fire({title:"¿Estás seguro?",text:"Esta acción no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"});case 3:if(!r.sent.isConfirmed){r.next=10;break}return r.next=7,t.$axios.delete("Asset/Delete/".concat(e));case 7:return t.$toast.success("Activo eliminado correctamente.","Éxito",t.izitoastConfig),r.next=10,t.fetchAssets();case 10:r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),t.$toast.error(r.t0.message,"Error al eliminar el activo",t.izitoastConfig);case 15:case"end":return r.stop()}}),r,null,[[0,12]])})))()},searchAssets:function(){}}},v=m,h=(r(788),r(18)),component=Object(h.a)(v,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"card"},[t("div",{staticClass:"card-body"},[t("h4",[e._v("Listado de Activos")]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-4 mb-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Buscar..."},domProps:{value:e.searchQuery},on:{input:[function(t){t.target.composing||(e.searchQuery=t.target.value)},e.searchAssets]}})]),e._v(" "),t("div",{staticClass:"col-md-8 mb-2 text-right"},[t("button",{staticClass:"btn btn-primary",on:{click:e.createNewAsset}},[t("i",{staticClass:"bx bx-plus"}),e._v(" Nuevo Activo\n          ")])])]),e._v(" "),t("b-table",{attrs:{striped:"",hover:"",items:e.assets,fields:e.fields,"per-page":e.perPage,"current-page":e.currentPage,filter:e.searchQuery},scopedSlots:e._u([{key:"cell(actions)",fn:function(r){return[t("b-button",{attrs:{size:"sm"},on:{click:function(t){return e.editAsset(r.item.id)}}},[t("i",{staticClass:"bx bx-edit"}),e._v(" Editar\n          ")]),e._v(" "),t("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(t){return e.deleteAsset(r.item.id)}}},[t("i",{staticClass:"bx bx-trash"}),e._v(" Eliminar\n          ")])]}}])}),e._v(" "),t("b-pagination",{attrs:{"total-rows":e.totalRows,"per-page":e.perPage,align:"center"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)])])}),[],!1,null,null,null);t.default=component.exports}}]);