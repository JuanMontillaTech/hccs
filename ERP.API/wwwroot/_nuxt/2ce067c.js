(window.webpackJsonp=window.webpackJsonp||[]).push([[88,28],{587:function(t,e,o){var content=o(591);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(53).default)("86dda686",content,!0,{sourceMap:!1})},590:function(t,e,o){"use strict";o(587)},591:function(t,e,o){var n=o(52)((function(i){return i[1]}));n.push([t.i,".loader[data-v-297c2299]{color:#bbb;text-align:center}.req[data-v-297c2299]{color:#ff0202}",""]),n.locals={},t.exports=n},592:function(t,e,o){"use strict";o.r(e);o(18),o(19),o(4),o(2),o(7),o(8),o(9),o(6),o(10);var n=o(0),c=(o(76),o(77),o(183)),l=o(601),r=o(599),m=o.n(r),d=o(600),f=o.n(d);function h(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function v(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?h(Object(o),!0).forEach((function(e){Object(n.a)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):h(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}Object(c.c)("required",v(v({},l.a),{},{message:"El campo es requerido"}));var y={name:"InfiniteScroll",components:{ValidationProvider:c.b,ckeditor:m.a.component},data:function(){return{Scheme:{},editor:f.a,years:null,allowedTypes:[{type:0,inputType:"text"},{type:2,inputType:"text"},{type:6,inputType:"password"},{type:7,inputType:"text"},{type:9,inputType:"date"}]}},props:["item","FieldsData","labelShow"],watch:{Scheme:{handler:function(){this.$emit("CustomChange",this.Scheme)},deep:!0}},created:function(){this.Scheme=this.FieldsData,void 0===this.Scheme[this.item.field]?this.SetValues():(9===this.item.type&&this.Scheme[this.item.field]&&(this.Scheme[this.item.field]=this.Scheme[this.item.field].substr(0,10)),11===this.item.type&&(this.years=this.generateYears(2020,(new Date).getFullYear()+5)))},methods:{isAllowedType:function(t){return this.allowedTypes.some((function(e){return e.type===t}))},getAllowedType:function(t){return this.allowedTypes.find((function(e){return e.type===t}))},SetValues:function(){if(this.Scheme[this.item.field]=this.item.defaultValue,9===this.item.type){var t=new Date;this.Scheme[this.item.field]=t.toISOString().substr(0,10)}11===this.item.type&&(this.years=this.generateYears(2020,(new Date).getFullYear()+5)),3===this.item.type&&(this.Scheme[this.item.field]=["true","yes","1"].includes(this.item.defaultValue))},GetLitValue:function(t,e){this.Scheme[t]=e},generateYears:function(t,e){for(var o=[],n=t;n<=e;n++)o.push(n);return o}}},_=(o(590),o(17)),component=Object(_.a)(y,(function(){var t=this,e=t._self._c;return e("div",[t.item.showForm&&t.item.isActive?[e("tr",[e("th",[t._v(t._s(t.item.label)+"    "),t.item.isRequired?e("span",{staticClass:"req"},[t._v("*")]):t._e()])]),t._v(" "),e("tr",[e("td",[t.isAllowedType(t.item.type)?e("b-form-group",{attrs:{"label-for":"input-".concat(t.item.type,"-").concat(t.item.field),"label-cols-sm":"4"}},[e("b-form-input",{staticStyle:{width:"250px"},attrs:{id:"input-".concat(t.item.type,"-").concat(t.item.field),type:t.getAllowedType(t.item.type).inputType,size:"sm",autocomplete:"off",name:t.item.field,readonly:7===t.item.type},model:{value:t.Scheme[t.item.field],callback:function(e){t.$set(t.Scheme,t.item.field,e)},expression:"Scheme[item.field]"}})],1):t._e(),t._v(" "),1===t.item.type?e("b-form-group",{attrs:{"label-for":"select-1","label-cols-sm":"4"}},[e("vSelect",{staticStyle:{width:"250px"},attrs:{id:"select-".concat(t.item.type,"-").concat(t.item.field),field:t.item,select:t.Scheme[t.item.field],size:"sm"},on:{CustomChange:t.GetLitValue}})],1):t._e(),t._v(" "),10===t.item.type?e("b-form-group",{attrs:{"label-for":"select-10","label-cols-sm":"4"}},[e("vSelectContact",{attrs:{id:"select-10",field:t.item,select:t.Scheme[t.item.field]},on:{CustomChange:t.GetLitValue}})],1):t._e(),t._v(" "),3===t.item.type?e("b-form-group",{attrs:{"label-cols-sm":"4"}},[e("b-form-checkbox",{attrs:{name:t.item.field,id:"checkbox-".concat(t.item.type,"-").concat(t.item.field),switch:""},model:{value:t.Scheme[t.item.field],callback:function(e){t.$set(t.Scheme,t.item.field,e)},expression:"Scheme[item.field]"}})],1):t._e(),t._v(" "),4===t.item.type?e("b-form-group",{attrs:{"label-for":"datepicker-4","label-cols-sm":"4"}},[e("b-form-datepicker",{attrs:{id:"datepicker-".concat(t.item.type,"-").concat(t.item.field),name:t.item.field,locale:"es",size:"sm",disabled:"show"==t.$route.query.Action},model:{value:t.Scheme[t.item.field],callback:function(e){t.$set(t.Scheme,t.item.field,e)},expression:"Scheme[item.field]"}})],1):t._e(),t._v(" "),5===t.item.type?e("b-form-group",{attrs:{"label-for":"textarea-5","label-cols-sm":"4"}},[e("b-form-textarea",{attrs:{id:"textarea-".concat(t.item.type,"-").concat(t.item.field),rows:"3",size:"sm","max-rows":"6",name:t.item.field},model:{value:t.Scheme[t.item.field],callback:function(e){t.$set(t.Scheme,t.item.field,e)},expression:"Scheme[item.field]"}})],1):t._e(),t._v(" "),8===t.item.type?e("b-form-group",{attrs:{"label-cols-sm":"4"}},[e("ckeditor",{attrs:{editor:t.editor,name:t.item.field},model:{value:t.Scheme[t.item.field],callback:function(e){t.$set(t.Scheme,t.item.field,e)},expression:"Scheme[item.field]"}}),t._v(" "),e("div",{domProps:{innerHTML:t._s(t.Scheme[t.item.field])}})],1):t._e(),t._v(" "),11===t.item.type?e("b-form-group",{attrs:{"label-cols-sm":"4"}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.Scheme[t.item.field],expression:"Scheme[item.field]"}],staticClass:"form-control form-control-sm",attrs:{id:"input-".concat(t.item.type,"-").concat(t.item.field)},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.Scheme,t.item.field,e.target.multiple?o:o[0])}}},t._l(t.years,(function(o){return e("option",{key:o,domProps:{value:o}},[t._v(t._s(o))])})),0)]):t._e()],1)])]:t._e()],2)}),[],!1,null,"297c2299",null);e.default=component.exports},757:function(t,e,o){var content=o(814);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(53).default)("529c4223",content,!0,{sourceMap:!1})},813:function(t,e,o){"use strict";o(757)},814:function(t,e,o){var n=o(52)((function(i){return i[1]}));n.push([t.i,"hr.new1{border-top:1px solid blue}.text-size-required{font-size:12px}",""]),n.locals={},t.exports=n},901:function(t,e,o){"use strict";o.r(e);o(25);var n=o(30),c=(o(75),o(4),o(2),o(76),o(135),{head:function(){return{title:"".concat(this.DataForm.title," | ERP")}},data:function(){return{FormId:"",DataForm:[],DataFormSection:[],fields:[],principalSchema:{contactId:null,code:null,date:null,reference:null,paymentMethodId:null,globalDiscount:0,globalTotal:0,transactionsType:1,transactionsDetails:null,numerationId:null,commentary:""},schema:{id:null,transactionsId:null,referenceId:null,description:null,amount:1,price:0,discount:0,total:0,tax:0},conceptSelectList:[],rows:[],invoice_subtotal:0,invoice_total:0,invoice_tax:0,list:[{id:null,concept:null,transactionsId:null,referenceId:null,description:null,amount:1,price:0,discount:0,total:0,tax:0}]}},created:function(){this.FormId=this.$route.query.Form,console.log(this.$route.query.Action),this.GetFormRows(),"Show"===this.$route.query.Action&&this.getTransactionsDetails()},methods:{GetValueFormElement:function(t){this.principalSchema=t},GetLitValue:function(t,e){this.principalSchema[t]=e},GetFilterDataOnlyshowForm:function(t){return t.filter((function(t){return 1==t.showForm}))},setSelected:function(data,t){var e=this.list.find((function(element,e){return e===t})),o=this.conceptSelectList.find((function(element){return element.id==e.referenceId}));e.referenceId=o.id,e.price=o.priceSale,this.calculateLineTotal(e)},GetFormRows:function(){var t=this,e="Form/GetById?Id=".concat(this.FormId);this.DataForm=[],this.DataFormSection=[],this.$axios.get(e).then((function(e){t.DataForm=e.data.data,t.GetFilds()})).catch((function(e){t.$toast.error("".concat(e),"ERROR",t.izitoastConfig)}))},GetFilds:function(){var t=this;this.$axios.get("Formfields/GetSectionWithFildsByFormID/".concat(this.FormId)).then((function(e){t.DataFormSection=e.data.data,t.GetProduct()})).catch((function(e){t.$toast.error("".concat(e),"ERROR",t.izitoastConfig)}))},GetProduct:function(){var t=this;this.$axios.get("Concept/GetAll").then((function(e){t.conceptSelectList=e.data.data})).catch((function(e){t.$toast.error("".concat(e),"ERROR",t.izitoastConfig)}))},calculateTotal:function(){var t,e;t=this.list.reduce((function(t,e){var o=parseFloat(e.total);if(!isNaN(o))return t+o}),0),this.invoice_subtotal=t.toFixed(2),e=t*(this.invoice_tax/100)+t,e=parseFloat(e),isNaN(e)?(this.invoice_total="0.00",this.principalSchema.globalTotal=this.invoice_total):(this.invoice_total=e.toFixed(2),this.principalSchema.globalTotal=this.invoice_total)},calculateLineTotal:function(t){var e=parseFloat(t.price)*parseFloat(t.amount);isNaN(e)||(t.total=e.toFixed(2)),this.calculateTotal()},GoBack:function(){this.$router.push({path:"/ExpressForm/Index?Form=".concat(this.FormId)})},removeRow:function(t){},addRow:function(){this.list.push({id:null,transactionsId:null,referenceId:null,description:null,amount:1,price:0,discount:0,total:0,tax:0,code:null,concept:null})},editSchema:function(){this.put(this.principalSchema)},saveSchema:function(){this.principalSchema.transactionsDetails=this.list,this.post(this.principalSchema)},getTransactionsDetails:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o="Transaction/GetById?id=".concat(t.$route.query.Id),t.$axios.get(o).then((function(e){t.principalSchema=e.data.data,t.list=e.data.data.transactionsDetails,t.calculateTotal()})).catch((function(e){t.$toast.error("".concat(e),"ERROR",t.izitoastConfig)}));case 2:case"end":return e.stop()}}),e)})))()},post:function(data){var t=this;data.transactionsType=this.DataForm.transactionsType,data.formId=this.FormId,console.log("Data",data);var e=null;this.$axios.post("Transaction/Create",data).then((function(o){e=o,console.log(e),t.$toast.success("El Registro ha sido creado correctamente.","ÉXITO"),t.GoBack()})).catch((function(o){e=o,t.$toast.error("".concat(e),"ERROR",t.izitoastConfig)}))},put:function(data){var t=this;data.transactionsType=this.DataForm.transactionsType,data.formId=this.FormId,console.log("Data",data),console.log("URL","Transaction/Update"),this.$axios.put("Transaction/Update",data).then((function(e){t.$toast.success("El Registro ha sido actualizado correctamente.","EXITO"),t.GoBack()})).catch((function(e){reject(e),t.$toast.error("".concat(e),"ERROR",t.izitoastConfig)}))},removeSchema:function(t){this.$toast.question("Esta seguro que quiere eliminar esta cuenta?","PREGUNTA",{timeout:2e4,close:!1,overlay:!0,toastOnce:!0,id:"question",zindex:999,position:"center",buttons:[["<button><b>YES</b></button>",function(e,o){e.hide({transitionOut:"fadeOut"},o,"button"),this.$axios.delete("Transaction/Delete/?id=".concat(t)).then((function(t){alert("EXITO: El Registro ha sido eliminado correctamente."),location.reload()})).catch((function(t){return alert(t)}))},!0],["<button>NO</button>",function(t,e){t.hide({transitionOut:"fadeOut"},e,"button")}]]})},clearForm:function(){this.invoice_subtotal=0,this.invoice_total=0,this.principalSchema={contactId:null,code:null,date:null,reference:null,paymentMethodId:null,globalDiscount:0,globalTotal:0,transactionsType:1,transactionsDetails:null,commentary:""}}}}),l=(o(813),o(17)),component=Object(l.a)(c,(function(){var t=this,e=t._self._c;return e("div",[e("h4",[t._v(t._s(t.DataForm.title))]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[t._l(t.DataFormSection,(function(o,n){return e("div",{key:n},[e("div",{staticClass:"row ml-0 mb-3"},[e("div",{staticClass:"col-lg-12 col-md-12 col-sm-12"},[e("h4",[t._v(t._s(o.name))]),t._v(" "),e("hr",{staticClass:"new1"})])]),t._v(" "),e("div",{staticClass:"row"},t._l(t.GetFilterDataOnlyshowForm(o.fields),(function(o,n){return e("div",{key:n,staticClass:"col-4"},[e("DynamicElementGrid",{attrs:{FieldsData:t.principalSchema,item:o,labelShow:!0},on:{CustomChange:t.GetValueFormElement}})],1)})),0)])})),t._v(" "),e("table",{staticClass:"table striped table-border"},[e("thead",[e("tr",[e("th",[t.list.length<1?[e("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.addRow()}}},[e("span",[e("i",{staticClass:"fas fa-plus"})])])]:t._e(),t._v("\n                  Concepto\n                ")],2),t._v(" "),e("th",[t._v("Cantidad")]),t._v(" "),e("th",[t._v("Precio")]),t._v(" "),e("th",[t._v("Total")])])]),t._v(" "),e("tbody",t._l(t.list,(function(o,n){return e("tr",{key:n},[e("td",[e("b-form-group",[e("vueselect",{staticStyle:{width:"350px"},attrs:{options:t.conceptSelectList,reduce:function(t){return t.id},label:"reference",disabled:"",size:"sm"},on:{input:function(e){return t.setSelected(o,n)}},model:{value:o.referenceId,callback:function(e){t.$set(o,"referenceId",e)},expression:"item.referenceId"}})],1)],1),t._v(" "),e("td",[e("b-form-group",[e("b-form-input",{staticClass:"mb-2",attrs:{type:"number",disabled:"",size:"sm"},on:{change:function(e){return t.calculateLineTotal(o)}},model:{value:o.amount,callback:function(e){t.$set(o,"amount",e)},expression:"item.amount"}})],1)],1),t._v(" "),e("td",[e("b-form-group",[e("b-form-input",{staticClass:"mb-2",attrs:{type:"number",disabled:"",size:"sm"},on:{change:function(e){return t.calculateLineTotal(o)}},model:{value:o.price,callback:function(e){t.$set(o,"price",e)},expression:"item.price"}})],1)],1),t._v(" "),e("td",[e("b-form-group",[e("b-form-input",{staticClass:"mb-2",attrs:{type:"number",disabled:"",size:"sm"},model:{value:o.total,callback:function(e){t.$set(o,"total",e)},expression:"item.total"}})],1)],1),t._v(" "),t._e()])})),0)]),t._v(" "),e("div",{staticClass:"row ml-0 mb-3"},[e("div",{staticClass:"col-lg-3"},[e("b-form-group",[e("h4",{staticClass:"card-title"},[t._v("SubTotal")]),t._v(" "),e("b-form-input",{attrs:{disabled:""},model:{value:t.invoice_subtotal,callback:function(e){t.invoice_subtotal=e},expression:"invoice_subtotal"}})],1)],1),t._v(" "),e("div",{staticClass:"col-lg-3"},[e("b-form-group",[e("h4",{staticClass:"card-title"},[t._v("Total")]),t._v(" "),e("b-form-input",{attrs:{disabled:""},model:{value:t.invoice_total,callback:function(e){t.invoice_total=e},expression:"invoice_total"}})],1)],1)]),t._v(" "),e("div",{staticClass:"row justify-content-end w-100 gx-2"},[(t.$route.query.Action,e("div",{staticClass:"col-3 p-2"},[e("b-button-group",{staticClass:"mt-4 mt-md-0"},[e("b-button",{staticClass:"btn",attrs:{variant:"secundary"},on:{click:function(e){return t.GoBack()}}},[e("i",{staticClass:"bx bx-arrow-back"}),t._v(" Regresar\n                ")]),t._v(" "),t._e()],1)],1))]),t._v(" "),e("div",{staticClass:"row ml-0 mb-3"},[e("div",{staticClass:"col-lg-12 col-md-12 col-sm-12"},[e("hr",{staticClass:"new1"}),t._v(" "),e("b-form-group",{attrs:{id:"input-group-2","label-for":"input-2"}},[e("h4",{staticClass:"card-title"},[t._v("Comentario")]),t._v(" "),e("b-form-textarea",{attrs:{id:"textarea",disabled:"",rows:"3","max-rows":"6"},model:{value:t.principalSchema.commentary,callback:function(e){t.$set(t.principalSchema,"commentary",e)},expression:"principalSchema.commentary"}})],1)],1)]),t._v(" "),t._m(0),t._v(" "),e("div",{staticClass:"row ml-0 mb-3"},[e("div",{staticClass:"col-lg-6 col-md-6 col-sm-6"},[e("b-form-group",{attrs:{id:"input-group-2",label:"Creado Por :","label-for":"input-2"}},[e("b-form-input",{attrs:{id:"textarea",rows:"3",disabled:"","max-rows":"6"},model:{value:t.principalSchema.createdBy,callback:function(e){t.$set(t.principalSchema,"createdBy",e)},expression:"principalSchema.createdBy"}})],1)],1),t._v(" "),e("div",{staticClass:"col-lg-6 col-md-6 col-sm-6"},[e("b-form-group",{attrs:{id:"input-group-2",label:"Creado en :","label-for":"input-2"}},[e("b-form-input",{attrs:{id:"textarea",rows:"3",disabled:"","max-rows":"6"},model:{value:t.principalSchema.createdDate,callback:function(e){t.$set(t.principalSchema,"createdDate",e)},expression:"principalSchema.createdDate"}})],1)],1)]),t._v(" "),e("div",{staticClass:"row ml-0 mb-3"},[e("div",{staticClass:"col-lg-6 col-md-6 col-sm-6"},[e("b-form-group",{attrs:{id:"input-group-2",label:"Modificado Por:","label-for":"input-2"}},[e("b-form-input",{attrs:{id:"textarea",rows:"3",disabled:"","max-rows":"6"},model:{value:t.principalSchema.createdBy,callback:function(e){t.$set(t.principalSchema,"createdBy",e)},expression:"principalSchema.createdBy"}})],1)],1),t._v(" "),e("div",{staticClass:"col-lg-6 col-md-6 col-sm-6"},[e("b-form-group",{attrs:{id:"input-group-2",label:"Modificado en:","label-for":"input-2"}},[e("b-form-input",{attrs:{id:"textarea",rows:"3",disabled:"","max-rows":"6"},model:{value:t.principalSchema.lastModifiedDate,callback:function(e){t.$set(t.principalSchema,"lastModifiedDate",e)},expression:"principalSchema.lastModifiedDate"}})],1)],1)])],2)])])])])}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"row ml-0 mb-3"},[e("div",{staticClass:"col-lg-12 col-md-12 col-sm-12"},[e("h4",[t._v("Auditoría")]),t._v(" "),e("hr",{staticClass:"new1"})])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{DynamicElementGrid:o(592).default})}}]);