(window.webpackJsonp=window.webpackJsonp||[]).push([[61,27],{780:function(t,e,n){"use strict";n.r(e);n(4),n(2),n(104);var r,o=n(30),c=(n(75),n(19),n(17),n(601)),l=n.n(c),d=(n(750),n(679)),m={head:function(){return{title:" Sistema Contable"}},components:{StarRating:n.n(d).a},props:{customLinks:{type:Array,require:!0},includeNewOption:{type:Boolean,require:!0,default:!1},isCancel:{type:Boolean,require:!0,default:!1},PageEdit:{type:String,require:!0,default:""},PageCreate:{type:String,require:!0,default:""},PageShow:{type:String,require:!0,default:""},PageDelete:{type:String,require:!0,default:"Delete/"},printPage:{type:String,require:!0,default:"/ExpressForm/Ticket"}},data:function(){return{DateStart:(new Date).toISOString().substr(0,10),DateEnd:(new Date).toISOString().substr(0,10),DataForm:{},CheckDate:!0,showModal:!1,showModalRating:!1,tableData:[],isBusy:!1,currentPage:1,totalRows:0,perPage:10,pageOptions:[10,25,50,100],filter:"",filterOn:[],sortBy:"Number",sortDesc:!1,fields:["Acciones"]}},computed:{rows:function(){return this.tableData.length}},watch:{filter:function(t){""!==t&&0!==t.length||this.myProvider(this.currentPage),t.length>=3&&this.myProvider(this.currentPage)},CheckDate:function(t){this.myProvider(this.currentPage)},DateStart:function(t){this.myProvider(this.currentPage)},DateEnd:function(t){this.myProvider(this.currentPage)},"$route.query.Form":function(){this.CheckDate=!0,this.GetForm()},perPage:function(t){this.myProvider(this.currentPage)}},mounted:function(){this.GetForm()},methods:{GetForm:function(){var t=this;this.FormId=this.$route.query.Form;var e="Form/GetById?Id=".concat(this.FormId);this.DataForm={},this.$axios.get(e).then((function(e){t.DataForm=e.data.data,t.GetFilds()})).catch((function(e){t.$toast.error("".concat(e),"ERROR",t.izitoastConfig)}))},GetFilds:function(){var t=this;this.$axios.get("Formfields/GetByFormId/".concat(this.FormId)).then((function(e){t.fields=[],t.fields=["Acciones"],e.data.data.map((function(e){e.isActive&&e.showList&&t.fields.push({label:e.label,key:e.field,sortable:!0})})),t.myProvider(t.currentPage)})).catch((function(e){t.$toast.error("".concat(e),"ERROR",t.izitoastConfig)}))},Tranfers:function(t,e,n){var r=this,o="Transaction/CreateChangeType?id=".concat(t,"&transactionsType=").concat(e,"&formId=").concat(n),c=null;this.$axios.post(o).then((function(t){c=t,r.$toast.success("El Registro ha sido creado correctamente.","ÉXITO")})).catch((function(t){c=t,r.$toast.error("".concat(c),"ERROR",r.izitoastConfig)}))},editModalSchema:function(t){this.$router.push({path:"".concat(this.PageEdit),query:{Action:"edit",Form:this.DataForm.id,Id:t}})},myProvider:(r=Object(o.a)(regeneratorRuntime.mark((function t(e){var n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.isBusy=!0,0===this.perPage&&(this.perPage=10),0===this.currentPage&&(this.currentPage=1),n="".concat(this.DataForm.controller,"/GetFilter?PageNumber=").concat(e,"&PageSize=").concat(this.perPage,"&Search=").concat(this.filter),"FEX"===this.DataForm.formCode&&(n="Transaction/GetFilter?PageNumber=".concat(e,"&PageSize=").concat(this.perPage,"&Search=").concat(this.filter,"\n        &transactionsTypeId=").concat(this.DataForm.transactionsType,"&dateStart=").concat(this.DateStart,"&dateEnd=").concat(this.DateEnd,"&valideFilter=").concat(this.CheckDate)),this.$axios.get(n).then((function(t){return r.tableData=[],r.isBusy=!1,r.tableData=t.data.data.data,r.currentPage=t.data.data.pageNumber,r.totalRows=t.data.data.totalPages,r.tableData.length=t.data.data.totalRecords,r.perPage=t.data.data.pageSize,0===r.perPage&&(r.perPage=10),0===r.currentPage&&(r.currentPage=1),t.data.data.data})).catch((function(t){r.$toast.error("".concat(t),"ERROR",r.izitoastConfig)}));case 6:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)}),goToUrl:function(t,e){var n=t+"?id="+e;this.$router.push({path:n})},newRequest:function(){this.$router.push({path:"".concat(this.PageCreate),query:{Form:this.DataForm.id,Action:"create",id:null}})},goInvoiceRecipe:function(t){this.$router.push({path:"/ExpressForm/FormReceipt?Type=".concat(this.DataForm.transactionsType,"&Form=").concat(this.FormId,"&Id=").concat(t)})},printForm:function(t){this.$router.push({path:"/ExpressForm/Ticket?Action=print&Form=".concat(this.FormId,"&Id=").concat(t)})},requestRating:function(){this.showModalRating=!0},onFiltered:function(t){},handleSubmit:function(){},confirmCancellation:function(t){var e=this,n="";n="FEX"===this.DataForm.formCode?"Transaction/".concat(this.PageDelete).concat(t):"".concat(this.DataForm.controller,"/").concat(this.PageDelete).concat(t),l.a.fire({title:"estas seguro?",text:"esta seguro que quiere remover esta fila",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si , Remuévela!",cancelButtonText:"Cancelar"}).then((function(t){t.isConfirmed&&e.$axios.delete(n).then((function(t){l.a.fire("Removido!","El registro esta removido.","success"),e.GetFilds()})).catch((function(t){return alert(t)}))}))}}},f=m,h=n(18),component=Object(h.a)(f,(function(){var t=this,e=t._self._c;return e("div",[e("b-modal",{attrs:{"title-class":"text-black font-18","body-class":"p-3","hide-footer":"",size:"sm",id:"modal-rating",centered:""},model:{value:t.showModalRating,callback:function(e){t.showModalRating=e},expression:"showModalRating"}},[e("div",{staticClass:"col-xl-12 col-md-12 col-sm-12"},[e("div",{staticClass:"p-4 text-center"},[e("h4",{staticClass:"mb-3"},[t._v("Califica tú solicitud de información")]),t._v(" "),e("star-rating",{attrs:{"star-size":25,"border-width":4,"border-color":"#d8d8d8","rounded-corners":!0,"star-points":[23,2,14,17,0,19,10,34,7,50,23,43,38,50,36,34,46,19,31,17]}})],1),t._v(" "),e("div",{staticClass:"text-center"},[e("button",{staticClass:"btn btn-success"},[t._v("Calificar")]),t._v(" "),e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.$bvModal.hide("modal-rating")}}},[t._v("\n          Cancelar\n        ")])])])]),t._v(" "),e("b-modal",{attrs:{"title-class":"text-black font-18","body-class":"p-3","hide-footer":"",size:"xl",id:"create-modal-request"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[e("RequestForm",{attrs:{action:2}})],1),t._v(" "),e("div",{staticClass:"row"},[t.includeNewOption?e("div",{staticClass:"col-md-4"},[e("div",[e("button",{staticClass:"btn btn-success mb-3",attrs:{type:"button"},on:{click:function(e){return t.newRequest()}}},[e("i",{staticClass:"far fa-file-alt"}),t._v(" Nuevo registro\n        ")])])]):t._e(),t._v(" "),e("div",{staticClass:"col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("h4",{staticClass:"card-title"},[t._v(" "+t._s(t.PageCreate)+"Lista de "+t._s(t.DataForm.title))]),t._v(" "),e("div",{staticClass:"row mt-4"},[e("div",{staticClass:"col-sm-12 col-md-6"},[e("div",{staticClass:"dataTables_length",attrs:{id:"tickets-table_length"}},[e("label",{staticClass:"d-inline-flex align-items-center"},[t._v("\n                  Mostrar \n                  "),e("b-form-select",{attrs:{size:"sm",options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}}),t._v(" entradas\n                ")],1)])]),t._v(" "),e("div",{staticClass:"col-sm-12 col-md-6"},[e("div",{staticClass:"dataTables_filter text-md-end",attrs:{id:"tickets-table_filter"}},["FEX"===t.DataForm.formCode?e("label",{staticClass:"d-inline-flex align-items-center"},[e("b-form-checkbox",{attrs:{id:"checkbox-1",name:"checkbox-1"},model:{value:t.CheckDate,callback:function(e){t.CheckDate=e},expression:"CheckDate"}},[t._v("\n                    Filtro\n                  ")])],1):t._e(),t._v(" "),"FEX"===t.DataForm.formCode&&t.CheckDate?e("label",{staticClass:"d-inline-flex align-items-center"},[t._v("\n\n                  Fecha\n                  "),e("b-form-input",{staticClass:"form-control form-control-sm",attrs:{type:"date"},model:{value:t.DateStart,callback:function(e){t.DateStart=e},expression:"DateStart"}})],1):t._e(),t._v(" "),"FEX"===t.DataForm.formCode&&t.CheckDate?e("label",{staticClass:"d-inline-flex align-items-center"},[t._v("\n                  Hasta:\n                  "),t.CheckDate?e("b-form-input",{staticClass:"form-control form-control-sm",attrs:{type:"date"},model:{value:t.DateEnd,callback:function(e){t.DateEnd=e},expression:"DateEnd"}}):t._e()],1):t._e(),t._v(" "),e("label",{staticClass:"d-inline-flex align-items-center"},[t._v("\n                  Buscar:\n                  "),e("b-form-input",{staticClass:"form-control form-control-sm ml-2",attrs:{type:"search"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1)])])]),t._v(" "),e("div",{staticClass:"table-responsive mb-0"},[e("b-table",{attrs:{items:t.tableData,fields:t.fields,responsive:"sm",busy:t.isBusy},on:{filtered:t.onFiltered},scopedSlots:t._u([{key:"table-busy",fn:function(){return[e("h2",{staticClass:"text-center text-primary my-2"},[e("b-spinner",{staticClass:"align-middle"}),t._v(" "),e("strong",[t._v("Cargando...")])],1)]},proxy:!0},{key:"cell(Acciones)",fn:function(data){return[e("ul",{staticClass:"list-inline mb-0"},[t.DataForm.print?e("li",{staticClass:"list-inline-item"},[e("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"px-2 text-primary",attrs:{title:"Imprimir"},on:{click:function(e){return t.printForm(data.item.id)}}},[e("i",{staticClass:"uil uil-print font-size-18"})])]):t._e(),t._v(" "),5===t.DataForm.transactionsType?e("li",{staticClass:"list-inline-item"},[e("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"px-2 text-primary",on:{click:function(e){return t.goInvoiceRecipe(data.item.id)}}},[e("i",{staticClass:"fas fa-file-invoice"})])]):t._e(),t._v(" "),t._l(t.customLinks,(function(n){return e("span",{key:n.key},[e("li",{staticClass:"list-inline-item"},[e("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],class:n.styleIcon,attrs:{title:n.title},on:{click:function(e){return t.goToUrl(n.link,data.item.id)}}},[e("i",{class:n.icon})])])])})),t._v(" "),e("li",{staticClass:"list-inline-item"},[e("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"px-2 text-primary",attrs:{title:"Editar"},on:{click:function(e){return t.editModalSchema(data.item.id)}}},[e("i",{staticClass:"uil uil-pen font-size-18"})])]),t._v(" "),8===t.DataForm.transactionsType?e("li",{staticClass:"list-inline-item"},[e("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"px-2 text-success",attrs:{title:"Transferir"},on:{click:function(e){return t.Tranfers(data.item.id,6,"25F94E8C-8EA0-4EE0-ADF5-02149A0E080B")}}},[e("i",{staticClass:"uil uil-eye font-size-18"})])]):t._e(),t._v(" "),e("li",{staticClass:"list-inline-item"},[e("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"px-2 text-danger",attrs:{title:"Cancelar solicitud"},on:{click:function(e){return t.confirmCancellation(data.item.id)}}},[e("i",{staticClass:"far fa-times-circle font-size-16"})])])],2)]}}])})],1),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("div",{staticClass:"dataTables_paginate paging_simple_numbers float-end"},[e("ul",{staticClass:"pagination pagination-rounded mb-0"},[e("b-pagination",{attrs:{"total-rows":t.rows,"per-page":t.perPage},on:{change:t.myProvider},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)])])])])])])])],1)}),[],!1,null,null,null);e.default=component.exports},870:function(t,e,n){"use strict";n.r(e);var r={data:function(){return{customElements:[],controller:"Journal",PageCreate:"/Accounting/JournalEntryCreateOrUpdate",PageEdit:"/Accounting/JournalEntryCreateOrUpdate"}}},o=n(18),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("div",[e("DatatableLinkOut",{attrs:{customLinks:t.customElements,PageCreate:t.PageCreate,PageEdit:t.PageEdit,includeNewOption:!0}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{DatatableLinkOut:n(780).default})}}]);