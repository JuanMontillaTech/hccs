(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{586:function(t,e,r){var map={"./af":450,"./af.js":450,"./ar":451,"./ar-dz":452,"./ar-dz.js":452,"./ar-kw":453,"./ar-kw.js":453,"./ar-ly":454,"./ar-ly.js":454,"./ar-ma":455,"./ar-ma.js":455,"./ar-sa":456,"./ar-sa.js":456,"./ar-tn":457,"./ar-tn.js":457,"./ar.js":451,"./az":458,"./az.js":458,"./be":459,"./be.js":459,"./bg":460,"./bg.js":460,"./bm":461,"./bm.js":461,"./bn":462,"./bn-bd":463,"./bn-bd.js":463,"./bn.js":462,"./bo":464,"./bo.js":464,"./br":465,"./br.js":465,"./bs":466,"./bs.js":466,"./ca":467,"./ca.js":467,"./cs":468,"./cs.js":468,"./cv":469,"./cv.js":469,"./cy":470,"./cy.js":470,"./da":471,"./da.js":471,"./de":472,"./de-at":473,"./de-at.js":473,"./de-ch":474,"./de-ch.js":474,"./de.js":472,"./dv":475,"./dv.js":475,"./el":476,"./el.js":476,"./en-au":477,"./en-au.js":477,"./en-ca":478,"./en-ca.js":478,"./en-gb":479,"./en-gb.js":479,"./en-ie":480,"./en-ie.js":480,"./en-il":481,"./en-il.js":481,"./en-in":482,"./en-in.js":482,"./en-nz":483,"./en-nz.js":483,"./en-sg":484,"./en-sg.js":484,"./eo":485,"./eo.js":485,"./es":486,"./es-do":487,"./es-do.js":487,"./es-mx":488,"./es-mx.js":488,"./es-us":489,"./es-us.js":489,"./es.js":486,"./et":490,"./et.js":490,"./eu":491,"./eu.js":491,"./fa":492,"./fa.js":492,"./fi":493,"./fi.js":493,"./fil":494,"./fil.js":494,"./fo":495,"./fo.js":495,"./fr":496,"./fr-ca":497,"./fr-ca.js":497,"./fr-ch":498,"./fr-ch.js":498,"./fr.js":496,"./fy":499,"./fy.js":499,"./ga":500,"./ga.js":500,"./gd":501,"./gd.js":501,"./gl":502,"./gl.js":502,"./gom-deva":503,"./gom-deva.js":503,"./gom-latn":504,"./gom-latn.js":504,"./gu":505,"./gu.js":505,"./he":506,"./he.js":506,"./hi":507,"./hi.js":507,"./hr":508,"./hr.js":508,"./hu":509,"./hu.js":509,"./hy-am":510,"./hy-am.js":510,"./id":511,"./id.js":511,"./is":512,"./is.js":512,"./it":513,"./it-ch":514,"./it-ch.js":514,"./it.js":513,"./ja":515,"./ja.js":515,"./jv":516,"./jv.js":516,"./ka":517,"./ka.js":517,"./kk":518,"./kk.js":518,"./km":519,"./km.js":519,"./kn":520,"./kn.js":520,"./ko":521,"./ko.js":521,"./ku":522,"./ku.js":522,"./ky":523,"./ky.js":523,"./lb":524,"./lb.js":524,"./lo":525,"./lo.js":525,"./lt":526,"./lt.js":526,"./lv":527,"./lv.js":527,"./me":528,"./me.js":528,"./mi":529,"./mi.js":529,"./mk":530,"./mk.js":530,"./ml":531,"./ml.js":531,"./mn":532,"./mn.js":532,"./mr":533,"./mr.js":533,"./ms":534,"./ms-my":535,"./ms-my.js":535,"./ms.js":534,"./mt":536,"./mt.js":536,"./my":537,"./my.js":537,"./nb":538,"./nb.js":538,"./ne":539,"./ne.js":539,"./nl":540,"./nl-be":541,"./nl-be.js":541,"./nl.js":540,"./nn":542,"./nn.js":542,"./oc-lnc":543,"./oc-lnc.js":543,"./pa-in":544,"./pa-in.js":544,"./pl":545,"./pl.js":545,"./pt":546,"./pt-br":547,"./pt-br.js":547,"./pt.js":546,"./ro":548,"./ro.js":548,"./ru":549,"./ru.js":549,"./sd":550,"./sd.js":550,"./se":551,"./se.js":551,"./si":552,"./si.js":552,"./sk":553,"./sk.js":553,"./sl":554,"./sl.js":554,"./sq":555,"./sq.js":555,"./sr":556,"./sr-cyrl":557,"./sr-cyrl.js":557,"./sr.js":556,"./ss":558,"./ss.js":558,"./sv":559,"./sv.js":559,"./sw":560,"./sw.js":560,"./ta":561,"./ta.js":561,"./te":562,"./te.js":562,"./tet":563,"./tet.js":563,"./tg":564,"./tg.js":564,"./th":565,"./th.js":565,"./tk":566,"./tk.js":566,"./tl-ph":567,"./tl-ph.js":567,"./tlh":568,"./tlh.js":568,"./tr":569,"./tr.js":569,"./tzl":570,"./tzl.js":570,"./tzm":571,"./tzm-latn":572,"./tzm-latn.js":572,"./tzm.js":571,"./ug-cn":573,"./ug-cn.js":573,"./uk":574,"./uk.js":574,"./ur":575,"./ur.js":575,"./uz":576,"./uz-latn":577,"./uz-latn.js":577,"./uz.js":576,"./vi":578,"./vi.js":578,"./x-pseudo":579,"./x-pseudo.js":579,"./yo":580,"./yo.js":580,"./zh-cn":581,"./zh-cn.js":581,"./zh-hk":582,"./zh-hk.js":582,"./zh-mo":583,"./zh-mo.js":583,"./zh-tw":584,"./zh-tw.js":584};function n(t){var e=o(t);return r(e)}function o(t){if(!r.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}n.keys=function(){return Object.keys(map)},n.resolve=o,t.exports=n,n.id=586},768:function(t,e,r){var content=r(827);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(53).default)("7ddf8214",content,!0,{sourceMap:!1})},826:function(t,e,r){"use strict";r(768)},827:function(t,e,r){var n=r(52)((function(i){return i[1]}));n.push([t.i,"hr.new1{border-top:1px solid blue}.text-size-required{font-size:12px}",""]),n.locals={},t.exports=n},914:function(t,e,r){"use strict";r.r(e);r(25);var n=r(30),o=(r(75),r(17),r(4),r(2),r(182),r(601)),c=r.n(o),l=r(585),d=r(448),m={head:function(){return{title:"".concat(this.DataForm.title," | ERP")}},data:function(){return{FormId:"",DataForm:[],TotalPaid:0,ListpaymentMethod:[],ListBank:[],RecipeDetails:[],ListCurrency:[],DataFormSection:[],currency:{},fields:["Acciones",{key:"transactionReceipt.document",label:"Recibo"},{key:"transactionReceipt.reference",label:"referencia"},{key:"transactionReceipt.date",label:"Fecha"},{key:"paid",label:"Pagado"}],principalSchema:{id:null,code:null,date:null,globalDiscount:0,globalTotal:0,transactionsType:1,transactionsDetails:null,numerationId:null,commentary:""},recipe:{date:null,currencyId:null,reference:"",paymentMethodId:null,bankId:null,code:"AutoGenerado",pay:0,transationId:null,globalTotal:0}}},created:function(){this.FormId=this.$route.query.Form,this.GetFormRows();var t=new Date;this.recipe.date=t.toISOString().substr(0,10)},methods:{SetTotal:function(t){return l(t).format("0,0.00")},getDate:function(){var t=new Date,e=t.getDate(),r=t.getMonth()+1,n=t.getFullYear();this.principalSchema.date="".concat(e,"/").concat(r,"/").concat(n)},GetFilterDataOnlyshowForm:function(t){return t.filter((function(t){return 1===t.showForm}))},GetFormRows:function(){var t=this,e="Form/GetById?Id=".concat(this.FormId);this.DataForm=[],this.DataFormSection=[],this.$axios.get(e).then((function(e){t.DataForm=e.data.data,t.getPaymentMethod(),t.getBank(),t.getCurrency(),t.getTransactionsDetails(),t.getRecipeDetails()})).catch((function(e){t.$toast.error("".concat(e),"ERROR",t.izitoastConfig)}))},printForm:function(t){this.$router.push({path:"/ExpressForm/TicketRecipe?Action=print&Form=".concat(this.FormId,"&Id=").concat(t)})},getCurrency:function(){var t=this;this.$axios.get("Currency/GetAll").then((function(e){t.ListCurrency=e.data.data,t.recipe.currencyId=t.ListCurrency[0].id})).catch((function(e){t.$toast.error("".concat(e),"ERROR",t.izitoastConfig)}))},getPaymentMethod:function(){var t=this;this.$axios.get("PaymentMethod/GetAll").then((function(e){t.ListpaymentMethod=e.data.data,t.recipe.paymentMethodId=t.ListpaymentMethod[0].id})).catch((function(e){t.$toast.error("".concat(e),"ERROR",t.izitoastConfig)}))},getBank:function(){var t=this;this.$axios.get("Bank/GetAll").then((function(e){t.ListBank=e.data.data,t.recipe.bankId=t.ListBank[0].id})).catch((function(e){t.$toast.error("".concat(e),"ERROR",t.izitoastConfig)}))},GoBack:function(){this.$router.push({path:"/ExpressForm/Index?Form=".concat(this.FormId)})},removeRow:function(t){this.list.splice(t,1)},FormatDate:function(t){return d(t).lang("es").format("DD/MM/YYYY")},editSchemaPrint:function(){this.putPrint(this.principalSchema)},onSubmit:function(){this.postPrint(this.recipe)},getTransactionsDetails:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r="Transaction/GetById?id=".concat(t.$route.query.Id),t.$axios.get(r).then((function(e){t.principalSchema=e.data.data})).catch((function(t){}));case 2:case"end":return e.stop()}}),e)})))()},getRecipeDetails:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r="TransactionReceipt/GetByTransactionId?id=".concat(t.$route.query.Id),t.$axios.get(r).then((function(e){t.RecipeDetails=e.data.data,t.getTotalRecipeDetails()})).catch((function(t){}));case 2:case"end":return e.stop()}}),e)})))()},getTotalRecipeDetails:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r="TransactionReceipt/GetTotalByTransactionId?id=".concat(t.$route.query.Id),t.$axios.get(r).then((function(e){t.TotalPaid=e.data.data})).catch((function(t){}));case 2:case"end":return e.stop()}}),e)})))()},postPrint:function(data){var t=this;data.globalTotal=this.principalSchema.globalTotal,data.transationId=this.principalSchema.id;var e=null;this.$axios.post("TransactionReceipt/CreateRecipe",data).then((function(r){e=r,t.$toast.success("El Registro ha sido creado correctamente.","ÉXITO"),t.printForm(e.data.data.id)})).catch((function(t){e=t}))},putPrint:function(data){var t=this;data.transactionsType=this.DataForm.transactionsType,data.formId=this.FormId;this.ValideForm();this.$axios.put("Transaction/Update",data).then((function(e){t.$toast.success("El Registro ha sido actualizado correctamente.","EXITO"),t.printForm(data.id)})).catch((function(t){reject(t)}))},confirmCancellation:function(t){var e,r=this;e="TransactionReceipt/Delete/".concat(t),console.log(e),c.a.fire({title:"estas seguro?",text:"esta seguro que quiere remover esta fila",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si , Remuévela!",cancelButtonText:"Cancelar"}).then((function(t){t.isConfirmed&&r.$axios.delete(e).then((function(t){c.a.fire("Removido!","El registro esta removido.","success"),r.getRecipeDetails()})).catch((function(t){return alert(t)}))}))}}},f=(r(826),r(18)),component=Object(f.a)(m,(function(){var t=this,e=t._self._c;return e("div",[e("h4",[t._v("Recibo de "+t._s(t.DataForm.title))]),t._v(" "),e("ValidationObserver",{ref:"form"},[e("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e("div",{staticClass:"row"},["edit"===t.$route.query.Action?e("div",{staticClass:"col-3 p-2"},[e("b-button-group",{staticClass:"mt-4 mt-md-0"},[e("b-button",{staticClass:"btn",attrs:{variant:"secundary"},on:{click:function(e){return t.GoBack()}}},[e("i",{staticClass:"bx bx-arrow-back"}),t._v(" Lista\n        ")]),t._v(" "),e("b-button",{attrs:{variant:"success",title:"Imprimir",size:"sm"},on:{click:function(e){return t.editSchemaPrint()}}},[e("i",{staticClass:"uil uil-print font-size-18"}),t._v(" Guardar\n\n        ")])],1)],1):e("div",{staticClass:"col-3 p-2"},[e("b-button-group",{staticClass:"mt-4 mt-md-0"},[e("b-button",{staticClass:"btn",attrs:{variant:"secundary",size:"sm"},on:{click:function(e){return t.GoBack()}}},[e("i",{staticClass:"bx bx-arrow-back"}),t._v(" Lista\n        ")]),t._v(" "),t.TotalPaid<t.principalSchema.globalTotal?e("b-button",{attrs:{variant:"success",title:"Imprimir",size:"sm"},on:{click:function(e){return t.onSubmit()}}},[e("i",{staticClass:"uil uil-print font-size-18"}),t._v(" Guardar\n        ")]):t._e()],1)],1)]),t._v(" "),e("div",{staticClass:"col-lg-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"row justify-content-center"},[t.TotalPaid>=t.principalSchema.globalTotal?e("div",{staticClass:"col-12"},[e("b-alert",{attrs:{variant:"success",show:""}},[t._v("Esta factura esta pagada")])],1):t._e()]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-2"},[e("b-form-group",{staticClass:"mb-2",attrs:{label:"Documento"}},[e("b-form-input",{attrs:{readonly:"true",type:"text",size:"sm"},model:{value:t.recipe.code,callback:function(e){t.$set(t.recipe,"code",e)},expression:"recipe.code"}})],1)],1),t._v(" "),e("div",{staticClass:"col-md-1"},[e("b-form-group",{staticClass:"mb-2",attrs:{label:"#Fact"}},[e("b-form-input",{attrs:{readonly:"true",type:"text",size:"sm"},model:{value:t.principalSchema.code,callback:function(e){t.$set(t.principalSchema,"code",e)},expression:"principalSchema.code"}})],1)],1),t._v(" "),e("div",{staticClass:"col-md-2"},[e("b-form-group",{staticClass:"mb-4",attrs:{label:"Fecha"}},[e("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(r){var n=r.errors;return[e("b-form-input",{attrs:{type:"date",size:"sm"},model:{value:t.recipe.date,callback:function(e){t.$set(t.recipe,"date",e)},expression:"recipe.date"}}),t._v(" "),n[0]?e("span",{staticClass:"text-danger"},[t._v(" El campo es requerido ")]):t._e()]}}])})],1)],1),t._v(" "),e("div",{staticClass:"col-md-5"},[e("b-form-group",{staticClass:"mb-2",attrs:{label:"Cliente"}},[t.principalSchema.contact?e("b-form-input",{attrs:{size:"sm",readonly:"true",type:"text"},model:{value:t.principalSchema.contact.name,callback:function(e){t.$set(t.principalSchema.contact,"name",e)},expression:"principalSchema.contact.name"}}):t._e()],1)],1)]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4"},[e("b-form-group",{staticClass:"mb-2",attrs:{label:"Caja/Banco"}},[e("vueselect",{attrs:{options:t.ListBank,reduce:function(t){return t.id},label:"name",size:"sm"},model:{value:t.recipe.bankId,callback:function(e){t.$set(t.recipe,"bankId",e)},expression:"recipe.bankId"}})],1)],1),t._v(" "),e("div",{staticClass:"col-md-4"},[e("b-form-group",{staticClass:"mb-3",attrs:{label:"Metodo Pago"}},[e("vueselect",{attrs:{options:t.ListpaymentMethod,reduce:function(t){return t.id},label:"name"},model:{value:t.recipe.paymentMethodId,callback:function(e){t.$set(t.recipe,"paymentMethodId",e)},expression:"recipe.paymentMethodId"}})],1)],1),t._v(" "),e("div",{staticClass:"col-md-2"},[e("b-form-group",{staticClass:"mb-2",attrs:{label:"Reference"}},[e("b-form-input",{attrs:{size:"sm",type:"text"},model:{value:t.recipe.reference,callback:function(e){t.$set(t.recipe,"reference",e)},expression:"recipe.reference"}})],1)],1)]),t._v(" "),e("div",{staticClass:"row ml-0 mb-3"},[e("div",{staticClass:"col-lg-2"},[e("b-form-group",[e("h4",{staticClass:"card-title"},[t._v("Total Facturado")]),t._v(" "),e("b-form-input",{attrs:{disabled:"",size:"sm"},model:{value:t.principalSchema.globalTotal,callback:function(e){t.$set(t.principalSchema,"globalTotal",e)},expression:"principalSchema.globalTotal"}})],1)],1),t._v(" "),e("div",{staticClass:"col-lg-2"},[e("b-form-group",[e("h4",{staticClass:"card-title"},[t._v("Total Pagado")]),t._v(" "),e("b-form-input",{attrs:{disabled:"",size:"sm"},model:{value:t.TotalPaid,callback:function(e){t.TotalPaid=e},expression:"TotalPaid"}})],1)],1),t._v(" "),e("div",{staticClass:"col-lg-2"},[e("b-form-group",[e("h4",{staticClass:"card-title"},[t._v("a pagar   ")]),t._v(" "),e("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(r){var n=r.errors;return[e("b-form-input",{directives:[{name:"mask",rawName:"v-mask",value:"####.##",expression:"`####.##`"}],attrs:{size:"sm"},model:{value:t.recipe.pay,callback:function(e){t.$set(t.recipe,"pay",e)},expression:"recipe.pay"}}),t._v(" "),n[0]?e("span",{staticClass:"text-danger"},[t._v(" El campo es requerido ")]):t._e()]}}])})],1)],1),t._v(" "),e("div",{staticClass:"col-md-2"},[e("b-form-group",{staticClass:"mb-2",attrs:{label:"Moneda"}},[e("vueselect",{staticClass:"sm",attrs:{options:t.ListCurrency,reduce:function(t){return t.id},label:"name",required:""},scopedSlots:t._u([{key:"option",fn:function(option){return[e("span",[t._v("\n                          Moneda "+t._s(option.name)+" "),e("strong",[t._v(" Tasa:  "+t._s(option.rate)+"   ")])])]}}]),model:{value:t.recipe.currencyId,callback:function(e){t.$set(t.recipe,"currencyId",e)},expression:"recipe.currencyId"}})],1)],1)]),t._v(" "),e("b-table",{attrs:{items:t.RecipeDetails,fields:t.fields,responsive:"sm"},scopedSlots:t._u([{key:"cell(Acciones)",fn:function(data){return[e("ul",{staticClass:"list-inline mb-0"},[e("li",{staticClass:"list-inline-item"},[e("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"px-2 text-primary",on:{click:function(e){return t.printForm(data.item.transactionReceiptId)}}},[e("i",{staticClass:"uil uil-print font-size-18"})])]),t._v(" "),e("li",{staticClass:"list-inline-item"},[e("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"px-2 text-danger",attrs:{title:"Cancelar solicitud"},on:{click:function(e){return t.confirmCancellation(data.item.transactionReceiptId)}}},[e("i",{staticClass:"far fa-times-circle font-size-16"})])])])]}}])}),t._v(" "),e("div",{staticClass:"row ml-0 mb-3"},[e("div",{staticClass:"col-lg-12 col-md-12 col-sm-12"},[e("hr",{staticClass:"new1"}),t._v(" "),e("b-form-group",{attrs:{id:"input-group-2","label-for":"input-2"}},[e("h4",{staticClass:"card-title"},[t._v("Comentario")]),t._v(" "),e("b-form-textarea",{attrs:{id:"textarea",rows:"3","max-rows":"6"},model:{value:t.principalSchema.commentary,callback:function(e){t.$set(t.principalSchema,"commentary",e)},expression:"principalSchema.commentary"}})],1)],1)]),t._v(" "),e("div",{staticClass:"row ml-0 mb-3"},[e("div",{staticClass:"col-lg-12 col-md-12 col-sm-12"},[e("h4",[t._v("Auditoría")]),t._v(" "),e("hr",{staticClass:"new1"})])]),t._v(" "),e("div",{staticClass:"row ml-0 mb-3"},[e("div",{staticClass:"col-lg-6 col-md-6 col-sm-6"},[e("b-form-group",{attrs:{id:"input-group-4",label:"Creado Por :","label-for":"input-2"}},[e("b-form-input",{attrs:{id:"textarea",rows:"3",disabled:"","max-rows":"6",size:"sm"},model:{value:t.principalSchema.createdBy,callback:function(e){t.$set(t.principalSchema,"createdBy",e)},expression:"principalSchema.createdBy"}})],1)],1),t._v(" "),e("div",{staticClass:"col-lg-6 col-md-6 col-sm-6"},[e("b-form-group",{attrs:{id:"input-group-4",label:"Creado en :","label-for":"input-2"}},[e("b-form-input",{attrs:{id:"textarea",rows:"3",disabled:"","max-rows":"6",size:"sm"},model:{value:t.principalSchema.createdDate,callback:function(e){t.$set(t.principalSchema,"createdDate",e)},expression:"principalSchema.createdDate"}})],1)],1)]),t._v(" "),e("div",{staticClass:"row ml-0 mb-3"},[e("div",{staticClass:"col-lg-6 col-md-6 col-sm-6"},[e("b-form-group",{attrs:{id:"input-group-2",label:"Modificado Por:","label-for":"input-2"}},[e("b-form-input",{attrs:{id:"textarea",rows:"3",disabled:"",size:"sm","max-rows":"6"},model:{value:t.principalSchema.createdBy,callback:function(e){t.$set(t.principalSchema,"createdBy",e)},expression:"principalSchema.createdBy"}})],1)],1),t._v(" "),e("div",{staticClass:"col-lg-6 col-md-6 col-sm-6"},[e("b-form-group",{attrs:{id:"input-group-2",label:"Modificado en:","label-for":"input-2"}},[e("b-form-input",{attrs:{id:"textarea",rows:"3",disabled:"","max-rows":"6",size:"sm"},model:{value:t.principalSchema.lastModifiedDate,callback:function(e){t.$set(t.principalSchema,"lastModifiedDate",e)},expression:"principalSchema.lastModifiedDate"}})],1)],1)])],1)])])])])],1)}),[],!1,null,null,null);e.default=component.exports}}]);